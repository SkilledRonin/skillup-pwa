<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#121212">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="SkillUp">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <!-- Manifest Link -->
    <link rel="manifest" href="manifest.json">

    <title>SkillUp - Your Learning Adventure!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            scroll-behavior: smooth;
            background-color: #121212; /* Dark background */
            color: #e0e0e0;
        }
        .hero-section {
            background-color: #121212;
            background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.1) 1px, transparent 0);
            background-size: 20px 20px;
            position: relative;
            overflow: hidden;
        }
        .glow-effect {
            position: absolute;
            width: 800px;
            height: 800px;
            background: radial-gradient(circle, rgba(76, 0, 255, 0.3) 0%, rgba(76, 0, 255, 0) 60%);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }
        .btn-primary {
            background-color: #00f5d4;
            color: #003e36;
            border-bottom: 4px solid #00bfa5;
            transition: all 0.2s ease;
        }
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 245, 212, 0.2);
        }
         .btn-primary:active {
            transform: translateY(1px);
            border-bottom-width: 2px;
        }
        .modal {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        .dark-modal-content {
            background-color: #1e1e1e;
            border: 1px solid #333;
        }
        .quiz-option {
            background-color: #2a2a2a;
            border: 2px solid #444;
            transition: all 0.2s ease;
        }
        .quiz-option:hover {
            transform: scale(1.03);
            border-color: #00f5d4;
            color: #00f5d4;
        }
        .quiz-option.correct {
            background-color: #145a32;
            border-color: #28a745;
            color: #fff;
        }
        .quiz-option.incorrect {
            background-color: #721c24;
            border-color: #dc3545;
            color: #fff;
        }
        .learning-path {
            position: relative;
            padding: 80px 0;
            background-color: #181818;
        }
        .path-line {
            display: none; /* Removed the vertical dotted line */
        }
        .path-node .node-content {
            padding: 25px;
            background: rgba(30, 30, 30, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid #333;
            width: 100%;
            max-width: 600px; /* Centered and stacked layout */
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

         .path-node .node-content:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 0 25px var(--glow-color, rgba(132, 0, 255, 0.5));
            border-color: var(--glow-color, rgba(132, 0, 255, 0.8));
        }
        
        .video-container {
            position: relative; padding-top: 56.25%; height: 0; overflow: hidden;
        }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        
        .challenge-card {
            background: linear-gradient(145deg, #232323, #1c1c1c);
            border-radius: 20px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 5px 5px 15px #111, -5px -5px 15px #2d2d2d;
            border: 1px solid #333;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
         .challenge-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 0 25px var(--glow-color, rgba(0, 245, 212, 0.5));
        }
        .leaderboard-item:first-child {
            background: linear-gradient(45deg, #ffc107, #ff9800);
            color: #121212;
            transform: scale(1.05);
            box-shadow: 0 0 20px #ffc107;
        }
        .spinner {
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-gray-300">

    <!-- Header -->
    <header class="bg-black/50 backdrop-blur-lg shadow-lg shadow-black/20 sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-extrabold text-white tracking-wider">
                <i class="fas fa-rocket mr-2 text-cyan-400"></i>SkillUp
            </a>
            <div class="hidden md:flex items-center space-x-8">
                <a href="#learning-path" class="font-semibold hover:text-cyan-400 transition-colors">Path</a>
                <a href="#leaderboard" class="font-semibold hover:text-cyan-400 transition-colors">Leaderboard</a>
                <a href="https://ncert.nic.in/textbook.php" target="_blank" rel="noopener noreferrer" class="font-semibold hover:text-cyan-400 transition-colors">Resources</a>
            </div>
            <a href="#" class="btn-primary font-bold px-6 py-2 rounded-lg">
                Get Started
            </a>
        </nav>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="hero-section text-white py-28">
            <div class="glow-effect"></div>
            <div class="container mx-auto px-6 text-center relative z-10">
                <h1 class="text-5xl md:text-7xl font-extrabold mb-4 tracking-tight">
                    Unlock Your <span class="text-cyan-400">Superpowers</span>.
                </h1>
                <p class="text-lg md:text-xl text-gray-400 max-w-2xl mx-auto mb-10">
                    Level up your skills. Conquer subjects with epic lessons and fun challenges.
                </p>
                <a href="#learning-path" class="btn-primary font-bold py-4 px-10 rounded-xl text-lg uppercase tracking-wider">
                    Start Your Quest
                </a>
            </div>
        </section>

        <!-- Learning Path Section -->
        <section id="learning-path" class="learning-path">
            <h2 class="text-4xl font-bold text-center mb-24 text-white">Your Learning Path</h2>
            <div class="path-line"></div>
            <div class="container mx-auto">
                <!-- Maths Node -->
                <div class="path-node">
                    <div class="node-content" style="--glow-color: #a855f7;">
                        <h3 class="text-2xl font-bold text-purple-400 mb-2">Maths Mountain</h3>
                        <p class="text-gray-400 mb-4">Climb the peak of knowledge by solving fun number puzzles.</p>
                        <button class="lesson-start-btn bg-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-600" data-subject="maths"><i class="fas fa-play mr-2"></i>Lesson</button>
                        <button class="quiz-start-btn bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700" data-subject="maths"><i class="fas fa-brain mr-2"></i>Quiz</button>
                    </div>
                </div>
                <!-- Physics Node -->
                <div class="path-node">
                    <div class="node-content" style="--glow-color: #38bdf8;">
                         <h3 class="text-2xl font-bold text-sky-400 mb-2">Physics Force Field</h3>
                        <p class="text-gray-400 mb-4">Uncover the laws of motion, energy, and the universe.</p>
                        <button class="lesson-start-btn bg-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-600" data-subject="physics"><i class="fas fa-play mr-2"></i>Lesson</button>
                        <button class="quiz-start-btn bg-sky-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-sky-600" data-subject="physics"><i class="fas fa-brain mr-2"></i>Quiz</button>
                    </div>
                </div>
                <!-- Chemistry Node -->
                <div class="path-node">
                    <div class="node-content" style="--glow-color: #f97316;">
                         <h3 class="text-2xl font-bold text-orange-400 mb-2">Chemistry Concoctions</h3>
                        <p class="text-gray-400 mb-4">Mix elements and discover the magic of reactions.</p>
                        <button class="lesson-start-btn bg-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-600" data-subject="chemistry"><i class="fas fa-play mr-2"></i>Lesson</button>
                        <button class="quiz-start-btn bg-orange-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-orange-600" data-subject="chemistry"><i class="fas fa-brain mr-2"></i>Quiz</button>
                    </div>
                </div>
                <!-- Biology Node -->
                <div class="path-node">
                    <div class="node-content" style="--glow-color: #34d399;">
                         <h3 class="text-2xl font-bold text-emerald-400 mb-2">Biology Biosphere</h3>
                        <p class="text-gray-400 mb-4">Explore the wonders of life, from tiny cells to giant whales.</p>
                        <button class="lesson-start-btn bg-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-600" data-subject="biology"><i class="fas fa-play mr-2"></i>Lesson</button>
                        <button class="quiz-start-btn bg-emerald-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-emerald-600" data-subject="biology"><i class="fas fa-brain mr-2"></i>Quiz</button>
                    </div>
                </div>
                <!-- History Node -->
                <div class="path-node">
                    <div class="node-content" style="--glow-color: #f59e0b;">
                        <h3 class="text-2xl font-bold text-amber-400 mb-2">History Odyssey</h3>
                        <p class="text-gray-400 mb-4">Travel back in time to meet kings, queens, and explorers.</p>
                        <button class="lesson-start-btn bg-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-600" data-subject="history"><i class="fas fa-play mr-2"></i>Lesson</button>
                        <button class="quiz-start-btn bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600" data-subject="history"><i class="fas fa-brain mr-2"></i>Quiz</button>
                    </div>
                </div>
                <!-- Geography Node -->
                <div class="path-node">
                    <div class="node-content" style="--glow-color: #3b82f6;">
                        <h3 class="text-2xl font-bold text-blue-400 mb-2">Geography Quest</h3>
                        <p class="text-gray-400 mb-4">Explore jungles, deserts, and oceans to become a map master.</p>
                        <button class="lesson-start-btn bg-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-600" data-subject="geography"><i class="fas fa-play mr-2"></i>Lesson</button>
                        <button class="quiz-start-btn bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600" data-subject="geography"><i class="fas fa-brain mr-2"></i>Quiz</button>
                    </div>
                </div>
                <!-- English Node -->
                <div class="path-node">
                    <div class="node-content" style="--glow-color: #ec4899;">
                        <h3 class="text-2xl font-bold text-pink-400 mb-2">English Eloquence</h3>
                        <p class="text-gray-400 mb-4">Master the art of language, from poetry to prose.</p>
                        <button class="lesson-start-btn bg-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-600" data-subject="english"><i class="fas fa-play mr-2"></i>Lesson</button>
                        <button class="quiz-start-btn bg-pink-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-pink-600" data-subject="english"><i class="fas fa-brain mr-2"></i>Quiz</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Puzzles & Challenges Section -->
        <section id="challenges" class="py-20 bg-black">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-12 text-white">Puzzles & Challenges</h2>
                <div class="grid md:grid-cols-3 gap-8">
                    <!-- Daily Puzzle Card -->
                    <div class="challenge-card" style="--glow-color: #2dd4bf;">
                        <div class="text-6xl text-teal-400 mb-4"><i class="fas fa-puzzle-piece"></i></div>
                        <h3 class="text-xl font-bold mb-2 text-white">Daily Riddle</h3>
                        <p class="text-gray-400 mb-4">A quick riddle to get your brain warmed up.</p>
                        <button class="puzzle-start-btn bg-teal-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-teal-600" data-puzzle="daily">Start Puzzle</button>
                    </div>
                    <!-- Brain Teaser Card -->
                    <div class="challenge-card" style="--glow-color: #f59e0b;">
                        <div class="text-6xl text-amber-400 mb-4"><i class="fas fa-lightbulb"></i></div>
                        <h3 class="text-xl font-bold mb-2 text-white">Brain Teaser</h3>
                        <p class="text-gray-400 mb-4">Test your logic with this tricky problem.</p>
                        <button class="puzzle-start-btn bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600" data-puzzle="teaser">Start Teaser</button>
                    </div>
                    <!-- Weekly Challenge Card -->
                    <div class="challenge-card" style="--glow-color: #a855f7;">
                        <div class="text-6xl text-purple-400 mb-4"><i class="fas fa-calendar-alt"></i></div>
                        <h3 class="text-xl font-bold text-white mb-2">Weekly Challenge</h3>
                        <p class="text-gray-400 mb-4">A tougher challenge with bigger rewards. New every week!</p>
                        <button class="challenge-start-btn bg-purple-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-purple-700" data-challenge="weekly">Start Challenge</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Leaderboard Section -->
        <section id="leaderboard" class="py-20 bg-gray-900">
             <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-12 text-white">Hall of Heroes</h2>
                <div class="max-w-2xl mx-auto bg-gray-800/50 rounded-2xl p-6 shadow-xl border border-gray-700">
                    <ol class="space-y-4">
                        <li class="leaderboard-item flex items-center justify-between p-4 rounded-xl">
                            <div class="flex items-center">
                                <span class="text-2xl font-bold mr-4 w-6 text-center">1</span>
                                <i class="fas fa-crown mr-3 text-2xl"></i>
                                <span class="font-bold text-lg">Aarav Sharma</span>
                            </div>
                            <span class="font-bold text-lg">12,500 XP</span>
                        </li>
                         <li class="flex items-center justify-between p-3 rounded-lg bg-gray-700/50 border border-gray-600">
                            <div class="flex items-center">
                                <span class="text-xl font-bold text-gray-400 mr-4 w-6 text-center">2</span>
                                <i class="fas fa-shield-alt text-gray-400 mr-3"></i>
                                <span class="font-semibold text-md">Priya Singh</span>
                            </div>
                            <span class="font-semibold text-md text-gray-400">11,200 XP</span>
                        </li>
                         <li class="flex items-center justify-between p-3 rounded-lg bg-gray-700/50 border border-gray-600">
                            <div class="flex items-center">
                                <span class="text-xl font-bold text-gray-400 mr-4 w-6 text-center">3</span>
                                <i class="fas fa-award text-gray-400 mr-3"></i>
                                <span class="font-semibold text-md">Rohan Mehta</span>
                            </div>
                            <span class="font-semibold text-md text-gray-400">9,800 XP</span>
                        </li>
                        <li class="flex items-center justify-between p-2 rounded-lg">
                            <div class="flex items-center">
                                <span class="text-lg font-bold text-gray-500 mr-4 w-6 text-center">4</span>
                                <span class="text-md ml-6">Ananya Gupta</span>
                            </div>
                            <span class="text-md text-gray-500">8,500 XP</span>
                        </li>
                         <li class="flex items-center justify-between p-2 rounded-lg">
                            <div class="flex items-center">
                                <span class="text-lg font-bold text-gray-500 mr-4 w-6 text-center">5</span>
                                <span class="text-md ml-6">Vikram Patel</span>
                            </div>
                            <span class="text-md text-gray-500">7,600 XP</span>
                        </li>
                    </ol>
                </div>
             </div>
        </section>

    </main>
    <footer class="text-center py-8 bg-black border-t border-gray-800">
        <p class="text-gray-500">&copy; 2025 SkillUp. Have fun learning!</p>
    </footer>

    <!-- Video Lesson Modal -->
    <div id="video-modal" class="modal fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 opacity-0 pointer-events-none z-50">
        <div class="dark-modal-content rounded-lg shadow-2xl w-full max-w-3xl transform transition-transform duration-300 scale-95">
            <div class="p-4 border-b border-gray-700 flex justify-between items-center">
                <h3 id="video-title" class="text-xl font-bold text-white">Watch Lesson</h3>
                <button id="close-video-btn" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            <div class="video-container">
                <iframe id="video-frame" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
    </div>
    
    <!-- Puzzle Modal -->
    <div id="puzzle-modal" class="modal fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 opacity-0 pointer-events-none z-50">
         <div class="dark-modal-content rounded-lg shadow-2xl w-full max-w-md transform transition-transform duration-300 scale-95">
            <div class="p-5 border-b border-gray-700 flex justify-between items-center bg-gray-800/50 rounded-t-lg">
                <h3 id="puzzle-title" class="text-xl font-bold text-white">Puzzle Time!</h3>
                <button id="close-puzzle-btn" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            <div class="p-6">
                <p id="puzzle-text" class="text-lg mb-4"></p>
                <input type="text" id="puzzle-input" class="w-full bg-gray-800 border-2 border-gray-600 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 text-white" placeholder="Your answer...">
                <div id="puzzle-feedback" class="mt-3 text-center font-semibold h-6"></div>
            </div>
            <div class="p-4 bg-gray-800/50 border-t border-gray-700 text-right rounded-b-lg">
                <button id="check-answer-btn" class="bg-cyan-500 text-black font-semibold px-5 py-2 rounded-lg hover:bg-cyan-600">Check Answer</button>
            </div>
        </div>
    </div>

    <!-- Weekly Challenge Modal -->
    <div id="challenge-modal" class="modal fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 opacity-0 pointer-events-none z-50">
         <div class="dark-modal-content rounded-lg shadow-2xl w-full max-w-lg transform transition-transform duration-300 scale-95">
            <div class="p-5 border-b border-gray-700 flex justify-between items-center bg-gray-800/50 rounded-t-lg">
                <h3 id="challenge-title" class="text-xl font-bold text-white">Weekly Challenge</h3>
                <button id="close-challenge-btn" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            <div class="p-6">
                <p id="challenge-text" class="text-lg mb-4"></p>
                <textarea id="challenge-input" rows="4" class="w-full bg-gray-800 border-2 border-gray-600 rounded-lg p-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-white" placeholder="Type your detailed answer here..."></textarea>
                <div id="challenge-feedback" class="mt-3 text-center font-semibold h-6"></div>
            </div>
            <div class="p-4 bg-gray-800/50 border-t border-gray-700 text-right rounded-b-lg">
                <button id="submit-challenge-btn" class="bg-purple-600 text-white font-semibold px-5 py-2 rounded-lg hover:bg-purple-700">Submit Entry</button>
            </div>
        </div>
    </div>

    <!-- Quiz Modal -->
    <div id="quiz-modal" class="modal fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 opacity-0 pointer-events-none z-50">
        <div class="dark-modal-content rounded-lg shadow-2xl w-full max-w-lg transform transition-transform duration-300 scale-95">
            <div class="p-5 border-b border-gray-700 flex justify-between items-center bg-gray-800/50 rounded-t-lg">
                <h3 id="quiz-title" class="text-xl font-bold text-white">Quiz Time!</h3>
                <button id="close-quiz-btn" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            <div class="p-6">
                <!-- Quiz Content -->
                <div id="quiz-content">
                    <!-- Questions will be injected here by JS -->
                </div>
                
                <!-- Quiz Results -->
                <div id="quiz-results" class="hidden text-center">
                    <h3 class="text-2xl font-bold mb-4 text-white">Quiz Complete!</h3>
                    <p id="results-text" class="text-lg mb-6"></p>
                    <div class="flex justify-center">
                        <button id="play-again-btn" class="btn-primary font-bold py-2 px-6 rounded-lg">Play Again</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DOM Elements ---
        const quizModal = document.getElementById('quiz-modal');
        const videoModal = document.getElementById('video-modal');
        const puzzleModal = document.getElementById('puzzle-modal');
        const challengeModal = document.getElementById('challenge-modal');
        const learningPathSection = document.getElementById('learning-path');
        const challengesSection = document.getElementById('challenges');

        // --- Video Modal Elements ---
        const closeVideoBtn = document.getElementById('close-video-btn');
        const videoTitle = document.getElementById('video-title');
        const videoFrame = document.getElementById('video-frame');
        
        // --- Quiz Modal Elements ---
        const closeQuizBtn = document.getElementById('close-quiz-btn');
        const quizContent = document.getElementById('quiz-content');
        const quizResults = document.getElementById('quiz-results');
        const resultsText = document.getElementById('results-text');
        const playAgainBtn = document.getElementById('play-again-btn');
        const quizTitle = document.getElementById('quiz-title');

        // --- Puzzle Modal Elements ---
        const closePuzzleBtn = document.getElementById('close-puzzle-btn');
        const puzzleTitle = document.getElementById('puzzle-title');
        const puzzleText = document.getElementById('puzzle-text');
        const puzzleInput = document.getElementById('puzzle-input');
        const puzzleFeedback = document.getElementById('puzzle-feedback');
        const checkAnswerBtn = document.getElementById('check-answer-btn');

        // --- Challenge Modal Elements ---
        const closeChallengeBtn = document.getElementById('close-challenge-btn');
        const challengeTitle = document.getElementById('challenge-title');
        const challengeText = document.getElementById('challenge-text');
        const challengeInput = document.getElementById('challenge-input');
        const challengeFeedback = document.getElementById('challenge-feedback');
        const submitChallengeBtn = document.getElementById('submit-challenge-btn');

        // --- Data Banks ---
        const videoData = {
             maths: { title: "Real Numbers Class 10", videoId: "LDIiYKYvvdA" },
             physics: { title: "Newton's Laws of Motion", videoId: "kKKM8Y-u7ds" },
             chemistry: { title: "Chemical Reactions and Equations", videoId: "dXCwJUNaqSo" },
             biology: { title: "Introduction to Cells: The Grand Cell Tour", videoId: "8IlzKri08kk" },
             history: { title: "The Rise of Nationalism in Europe", videoId: "KhDY4KJuvc0" },
             geography: { title: "Resources and Development", videoId: "J1afrDnnyt4" },
             english: { title: "A Letter to God | Class 10", videoId: "ZqLeGm4k6CU" }
        };

        const quizzes = {
            maths: [
                { question: "What is 12 x 12?", options: ["124", "144", "132", "154"], correct: 1 },
                { question: "Solve for x: x + 5 = 10", options: ["3", "5", "10", "15"], correct: 1 },
                { question: "What is the value of Pi (to two decimal places)?", options: ["3.14", "3.15", "3.16", "3.12"], correct: 0 },
                { question: "What is a triangle with two equal sides called?", options: ["Scalene", "Equilateral", "Isosceles", "Right-angled"], correct: 2 },
                { question: "What is the square root of 81?", options: ["7", "8", "9", "10"], correct: 2 }
            ],
            physics: [
                { question: "What is the unit of force?", options: ["Watt", "Joule", "Newton", "Pascal"], correct: 2 },
                { question: "Which law is also known as the law of inertia?", options: ["Newton's First Law", "Newton's Second Law", "Newton's Third Law", "Law of Gravitation"], correct: 0 },
                { question: "What phenomenon causes a rainbow?", options: ["Reflection", "Refraction", "Dispersion", "Diffraction"], correct: 2 },
                { question: "What is the unit of electric current?", options: ["Volt", "Ohm", "Watt", "Ampere"], correct: 3 },
                { question: "Sound waves cannot travel through which of the following?", options: ["Air", "Water", "Steel", "Vacuum"], correct: 3 }
            ],
            chemistry: [
                { question: "What is the chemical symbol for Gold?", options: ["Ag", "Au", "Gd", "Go"], correct: 1 },
                { question: "Which gas is most abundant in the Earth's atmosphere?", options: ["Oxygen", "Hydrogen", "Carbon Dioxide", "Nitrogen"], correct: 3 },
                { question: "What is the pH of pure water?", options: ["6", "7", "8", "5"], correct: 1 },
                { question: "Which element is number 1 on the periodic table?", options: ["Helium", "Oxygen", "Hydrogen", "Lithium"], correct: 2 },
                { question: "What is H2O more commonly known as?", options: ["Salt", "Sugar", "Water", "Vinegar"], correct: 2 }
            ],
            biology: [
                { question: "What is the powerhouse of the cell?", options: ["Nucleus", "Ribosome", "Mitochondria", "Cell Wall"], correct: 2 },
                { question: "Photosynthesis primarily occurs in which part of a plant?", options: ["Roots", "Stem", "Leaves", "Flower"], correct: 2 },
                { question: "How many bones are in the adult human body?", options: ["206", "208", "210", "201"], correct: 0 },
                { question: "Which gas do plants absorb from the atmosphere?", options: ["Oxygen", "Nitrogen", "Carbon Dioxide", "Hydrogen"], correct: 2 },
                { question: "What type of animal is a frog?", options: ["Mammal", "Reptile", "Amphibian", "Fish"], correct: 2 }
            ],
            history: [
                { question: "Which ancient civilization flourished in the Indus Valley?", options: ["Mesopotamian", "Egyptian", "Harappan", "Chinese"], correct: 2 },
                { question: "Who built the Taj Mahal?", options: ["Akbar", "Humayun", "Shah Jahan", "Aurangzeb"], correct: 2 },
                { question: "In which year did India gain independence?", options: ["1945", "1947", "1950", "1942"], correct: 1 },
                { question: "The Battle of Plassey was fought in which year?", options: ["1757", "1764", "1857", "1776"], correct: 0 },
                { question: "Who was the first Prime Minister of India?", options: ["Sardar Patel", "Mahatma Gandhi", "Jawaharlal Nehru", "Dr. Rajendra Prasad"], correct: 2 }
            ],
            geography: [
                { question: "What is the capital of India?", options: ["Mumbai", "Kolkata", "Chennai", "New Delhi"], correct: 3 },
                { question: "Which is the longest river in the world?", options: ["Amazon", "Nile", "Ganges", "Yangtze"], correct: 1 },
                { question: "Which is the largest planet in our solar system?", options: ["Earth", "Mars", "Jupiter", "Saturn"], correct: 2 },
                { question: "The Himalayan mountain range is located on which continent?", options: ["Africa", "Europe", "Asia", "South America"], correct: 2 },
                { question: "Which country is known as the Land of the Rising Sun?", options: ["China", "Japan", "South Korea", "Thailand"], correct: 1 }
            ],
            english: [
                { question: "Which of these is a synonym for 'happy'?", options: ["Sad", "Joyful", "Angry", "Tired"], correct: 1 },
                { question: "Identify the noun in the sentence: 'The cat sat on the mat.'", options: ["The", "Sat", "On", "Cat"], correct: 3 },
                { question: "What is the past tense of 'go'?", options: ["Gone", "Went", "Goed", "Going"], correct: 1 },
                { question: "Which word is an antonym for 'brave'?", options: ["Heroic", "Cowardly", "Strong", "Bold"], correct: 1 },
                { question: "What is a group of lions called?", options: ["A herd", "A pack", "A flock", "A pride"], correct: 3 }
            ]
        };

        const puzzleData = {
            daily: {
                title: "Daily Riddle",
                puzzle: "I have cities, but no houses. I have mountains, but no trees. I have water, but no fish. What am I?",
                answer: "a map"
            },
            teaser: {
                title: "Brain Teaser",
                puzzle: "A man is looking at a portrait. His friend asks who it is. The man replies, \"Brothers and sisters, I have none. But that man's father is my father's son.\" Who is in the portrait?",
                answer: "his son"
            }
        };
        
        const challengeData = {
            weekly: {
                title: "Weekend Explorer Challenge",
                challenge: "The magnificent Mysore Palace is beautifully illuminated on Sundays and public holidays. Your challenge: Describe the architectural style of the Mysore Palace and name the dynasty that built it. Submit your answer below!",
            }
        };

        let currentQuestionIndex = 0;
        let score = 0;
        let currentQuizData = [];
        let currentPuzzleAnswer = "";
        let currentQuizSubject = "";
        let currentLessonSubject = "";
        let wrongAnswers = [];

        // --- Shuffle Array Helper ---
        function shuffleArray(array) {
            let currentIndex = array.length, randomIndex;
            // While there remain elements to shuffle.
            while (currentIndex != 0) {
                // Pick a remaining element.
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                // And swap it with the current element.
                [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
            }
            return array;
        }

        // --- Modal Functions ---
        function openModal(modal) {
            modal.classList.remove('opacity-0', 'pointer-events-none');
            modal.querySelector('div').classList.remove('scale-95');
        }

        function closeModal(modal) {
            modal.classList.add('opacity-0', 'pointer-events-none');
            modal.querySelector('div').classList.add('scale-95');
            if (modal.id === 'video-modal') {
                videoFrame.src = "";
            }
        }
        
        // --- Video Lesson Functions ---
        function startLesson(subject) {
            currentLessonSubject = subject;
            const data = videoData[subject];
            if (!data) return;
            videoTitle.textContent = data.title;
            videoFrame.src = `https://www.youtube.com/embed/${data.videoId}`;
            openModal(videoModal);
        }

        // --- Quiz Functions ---
        function startQuiz(subject) {
            currentQuizSubject = subject;
            const questionBank = quizzes[subject];
            if (!questionBank || questionBank.length === 0) return;

            // Shuffle the question bank and take the first 3 questions
            currentQuizData = shuffleArray([...questionBank]).slice(0, 3);
            
            const subjectTitle = subject.charAt(0).toUpperCase() + subject.slice(1);
            quizTitle.textContent = `${subjectTitle} Quiz`;

            currentQuestionIndex = 0;
            score = 0;
            wrongAnswers = [];
            quizContent.classList.remove('hidden');
            quizResults.classList.add('hidden');
            showQuestion();
            openModal(quizModal);
        }

        function showQuestion() {
            const question = currentQuizData[currentQuestionIndex];
            quizContent.innerHTML = `
                <p class="text-gray-400 text-sm mb-2">Question ${currentQuestionIndex + 1}/${currentQuizData.length}</p>
                <h4 class="text-xl font-semibold mb-6 text-white">${question.question}</h4>
                <div id="options-container" class="space-y-3">
                    ${question.options.map((option, index) => `
                        <button class="quiz-option w-full text-left p-4 rounded-lg" data-index="${index}">${option}</button>
                    `).join('')}
                </div>`;
            document.querySelectorAll('.quiz-option').forEach(button => button.addEventListener('click', selectAnswer));
        }

        function selectAnswer(e) {
            const selectedButton = e.currentTarget;
            const selectedIndex = parseInt(selectedButton.dataset.index);
            const questionData = currentQuizData[currentQuestionIndex];
            const correctIndex = questionData.correct;

            document.querySelectorAll('.quiz-option').forEach(button => button.disabled = true);

            if (selectedIndex === correctIndex) {
                score++;
                selectedButton.classList.add('correct');
            } else {
                selectedButton.classList.add('incorrect');
                document.querySelector(`.quiz-option[data-index='${correctIndex}']`).classList.add('correct');
                wrongAnswers.push(questionData);
            }

            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < currentQuizData.length) {
                    showQuestion();
                } else {
                    showResults();
                }
            }, 1500);
        }

        function showResults() {
            quizContent.classList.add('hidden');
            quizResults.classList.remove('hidden');

            const xpEarned = score * 10;
            resultsText.innerHTML = `You scored ${score} out of ${currentQuizData.length}!<br>You earned <span class="font-bold text-cyan-400">${xpEarned} XP!</span>`;
        }

        // --- Puzzle Functions ---
        function startPuzzle(puzzleId) {
            const data = puzzleData[puzzleId];
            if (!data) return;
            puzzleTitle.textContent = data.title;
            puzzleText.textContent = data.puzzle;
            currentPuzzleAnswer = data.answer;
            puzzleInput.value = "";
            puzzleFeedback.textContent = "";
            puzzleFeedback.className = "mt-3 text-center font-semibold h-6";
            openModal(puzzleModal);
        }

        function checkAnswer() {
            const userAnswer = puzzleInput.value.trim().toLowerCase();
            if (userAnswer === "") return;
            if (userAnswer === currentPuzzleAnswer) {
                puzzleFeedback.textContent = "Correct! You earned 25 XP!";
                puzzleFeedback.className = "mt-3 text-center font-semibold h-6 text-green-500";
            } else {
                puzzleFeedback.textContent = "Not quite, try again!";
                puzzleFeedback.className = "mt-3 text-center font-semibold h-6 text-red-500";
            }
        }

        // --- Weekly Challenge Functions ---
        function startChallenge(challengeId) {
            const data = challengeData[challengeId];
            if (!data) return;
            challengeTitle.textContent = data.title;
            challengeText.textContent = data.challenge;
            challengeInput.value = "";
            challengeFeedback.textContent = "";
            challengeFeedback.className = "mt-3 text-center font-semibold h-6";
            submitChallengeBtn.disabled = false;
            openModal(challengeModal);
        }

        function submitChallenge() {
            if (challengeInput.value.trim() === "") {
                challengeFeedback.textContent = "Please enter an answer before submitting.";
                challengeFeedback.className = "mt-3 text-center font-semibold h-6 text-yellow-500";
                return;
            }
            challengeFeedback.textContent = "Great job! Entry submitted. You earned 100 XP!";
            challengeFeedback.className = "mt-3 text-center font-semibold h-6 text-green-500";
            submitChallengeBtn.disabled = true;
        }

        // --- Event Listeners ---
        learningPathSection.addEventListener('click', (e) => {
            const button = e.target.closest('button');
            if (!button) return;
            const subject = button.dataset.subject;
            if (button.classList.contains('quiz-start-btn')) startQuiz(subject);
            else if (button.classList.contains('lesson-start-btn')) startLesson(subject);
        });

        challengesSection.addEventListener('click', (e) => {
            const button = e.target.closest('button');
            if(!button) return;
            if (button.classList.contains('puzzle-start-btn')) {
                startPuzzle(button.dataset.puzzle);
            } else if (button.classList.contains('challenge-start-btn')) {
                startChallenge(button.dataset.challenge);
            }
        });
        
        closeQuizBtn.addEventListener('click', () => closeModal(quizModal));
        closeVideoBtn.addEventListener('click', () => closeModal(videoModal));
        closePuzzleBtn.addEventListener('click', () => closeModal(puzzleModal));
        closeChallengeBtn.addEventListener('click', () => closeModal(challengeModal));

        playAgainBtn.addEventListener('click', () => startQuiz(currentQuizSubject));
        checkAnswerBtn.addEventListener('click', checkAnswer);
        submitChallengeBtn.addEventListener('click', submitChallenge);
        
        videoModal.addEventListener('click', (e) => e.target === videoModal && closeModal(videoModal));
        quizModal.addEventListener('click', (e) => e.target === quizModal && closeModal(quizModal));
        puzzleModal.addEventListener('click', (e) => e.target === puzzleModal && closeModal(puzzleModal));
        challengeModal.addEventListener('click', (e) => e.target === challengeModal && closeModal(challengeModal));

        // --- PWA Service Worker Registration ---
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</body>
</html>



